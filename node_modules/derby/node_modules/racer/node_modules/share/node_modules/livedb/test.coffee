redis = require 'redis'
redis.debug_mode = true

client = redis.createClient()

toMulti = (arr) ->
  str = "*" + arr.length + "\r\n"

  for val in arr
    val = String(val) unless typeof val is 'string'
    str += "$" + Buffer.byteLength(val) + "\r\n" + val + "\r\n"

  str

client.subscribe ['a', 'b', 'c'], redis.print

client.on 'message', (channel, msg) -> console.log channel, msg

#client.eval ["return ARGV[1]", 0, 1,2,3], (err, result) ->
#client.eval "return ARGV[1]", 0, [1,2,3], (err, result) ->
#  console.log err, result

#client.eval "return {1,{\"2\",\"3\"},4}", 0, (err, result) ->
#  console.log err, result
